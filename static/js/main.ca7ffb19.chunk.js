(this.webpackJsonpd20organizer=this.webpackJsonpd20organizer||[]).push([[0],{28:function(e,a,t){e.exports=t(40)},38:function(e,a,t){},40:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),c=t(15),s=t.n(c),u=t(6),l=t(8),i=(t(37),t(38),t(9)),f=t(10),o=t(2),m=[{code:"bigger",name:"Bigger size",bonuses:{ac:-2,damage:1}},{code:"rage",name:"Rage",bonuses:{ac:-2,attack:2,damage:2}},{code:"fatigued",name:"Fatigued",bonuses:{ac:-1,attack:-1,damage:-1}},{code:"stonestrike",name:"Stone strike",bonuses:{attack:1,damage:1}},{code:"fightdefencively",name:"Fighting defencively",bonuses:{ac:2,attack:-4}},{code:"defencivestance",name:"Defencive Stance",bonuses:{ac:2,attack:2,damage:2}}],d={name:"Skyor",stats:{ac:31,attack:12,damage:3},buffs:[]},_=function(e,a){localStorage.setItem("d20o_"+e,JSON.stringify(a))},b=function(e){return JSON.parse(localStorage.getItem("d20o_"+e))},E=function(e){return new Promise((function(a,t){_("buffs",e),a(!0)}))},p=function(e){return new Promise((function(a,t){_("current_character",e),a(!0)}))},v=function(e){return{type:"CURRENT_CHARACTER_LOADED",payload:e}},N=function(){return function(e){e(h()),new Promise((function(e,a){var t=b("current_character");t?e(t):a(!1)})).then((function(a){return e(v(a))}),(function(a){return e(v(d))}))}},g=function(e){return{type:"BUFFS_LOADED",payload:e}},h=function(e){return{type:"BUFFS_REQUESTED",payload:e}},C=function(){return function(e){e(h()),new Promise((function(e,a){var t=b("buffs");t?e(t):a(!1)})).then((function(a){return e(g(a))}),(function(a){return e(g(m))}))}},y=function(){return function(e,a){a().buffs.loaded||e(C())}},O=function(e){return(e>0?"+":"")+e},F={attack:{string:"ATK",getter:O},ac:{string:"AC",getter:function(e){return e}},damage:{string:"DMG",getter:O}},R=function(e){var a=e.items,t=e.selected,n=e.keyProp,c=void 0===n?"code":n,s=e.nameGetter,u=e.descriptionGetter,l=e.onItemClick;return r.a.createElement("div",{className:"multiselect"},r.a.createElement("div",{className:"multiselect__wrapper"},a.map((function(e){var a="fa "+(-1!==t.indexOf(e[c])?"fa-square":"fa-square-o");return r.a.createElement("div",{className:"multiselect__item {isSelected ? 'multiselect__item--selected' : ''}",onClick:function(){l(e)},key:e[c]},r.a.createElement("div",{className:"multiselect__item-icon"},r.a.createElement("i",{className:a})),r.a.createElement("div",{className:"multiselect__item-name"},s(e)),r.a.createElement("div",{className:"multiselect__item-description"},u(e)))}))))},B=function(e){var a=e.value,t=e.onChange;return r.a.createElement("div",{className:"penned-string"},r.a.createElement("label",{className:"penned-string__wrapper"},r.a.createElement("input",{type:"text",className:"penned-string__input",value:a,onChange:t}),r.a.createElement("div",{className:"penned-string__text"},a,r.a.createElement("i",{className:"fa fa-pencil"}))))},U={currentCharacterUpdated:function(e){return{type:"CURRENT_CHARACTER_UPDATED",payload:e}},currentCharacterBuffToggle:function(e){return{type:"CURRENT_CHARACTER_BUFF_TOGGLE",payload:e}},smartFetchBuffs:y,smartFetchCurrentCharacter:function(){return function(e,a){a().currentCharacter.loaded||e(N())}}},j=Object(u.b)((function(e){return{buffs:e.buffs,currentCharacter:e.currentCharacter}}),U)((function(e){var a=e.buffs,t=e.currentCharacter,c=(e.currentResult,e.currentCharacterUpdated),s=e.currentCharacterBuffToggle,u=e.smartFetchBuffs,l=e.smartFetchCurrentCharacter;Object(n.useEffect)((function(){u(),l()}),[u,l]);var i=function(e){return function(a){var n=a.target.value.replace(/[^\d.-]/g,"");if("-"!==n&&"0-"!==n){var r=Object(o.a)({},t.data,{stats:Object(o.a)({},t.data.stats,Object(f.a)({},e,+n))});c(r)}}};return r.a.createElement("div",{className:"page"},r.a.createElement("div",{className:"page__wrapper"},r.a.createElement("div",{className:"page__title"},"Calculator"),r.a.createElement("div",{className:"page__section"},t.loaded?r.a.createElement("div",{className:"charedit"},r.a.createElement("div",{className:"charedit__title"},r.a.createElement(B,{value:t.data.name,onChange:function(e){var a=e.target.value;c(Object(o.a)({},t.data,{name:a}))}})),r.a.createElement("div",{className:"charedit__stats"},Object.keys(t.data.stats).map((function(e){var a="charedit__stats-bonus ";return t.result&&t.result.delta&&(t.result.delta[e]>0?a+="charedit__stats-bonus--positive":t.result.delta[e]<0&&(a+="charedit__stats-bonus--negative")),r.a.createElement("div",{className:"charedit__stats-item",key:e},r.a.createElement("div",{className:"charedit__stats-label"},F[e].string,":"),r.a.createElement("div",{className:"charedit__stats-content"},r.a.createElement("div",{className:"charedit__stats-rawval"},r.a.createElement("input",{value:t.data.stats[e],onChange:i(e),type:"text"})),t.result&&t.result.delta?r.a.createElement("div",{className:a},t.result.delta?F[e].getter(t.result.delta[e]):""):null,t.result&&t.result.stats?r.a.createElement("div",{className:"charedit__stats-result"},t.result.stats?F[e].getter(t.result.stats[e]):""):null))})))):null),r.a.createElement("div",{className:"page__section page__section--grower page__section--nopadding"},t.loaded&&a.loaded?r.a.createElement(R,{items:a.data,selected:t.data.buffs,keyProp:"code",nameGetter:function(e){return e.name},descriptionGetter:function(e){return Object.keys(e.bonuses).filter((function(a){return e.bonuses[a]})).map((function(a){return F[a].string+": "+F[a].getter(e.bonuses[a])})).join(", ")},onItemClick:function(e){s(e.code)}}):null)))})),T=function(e){var a=e.buff,t=e.onDelete,n=e.onEdit;return r.a.createElement("div",{className:"buff-item"},r.a.createElement("div",{className:"buff-item__wrapper"},r.a.createElement("div",{className:"buff-item__header"},r.a.createElement("div",{className:"buff-item__title"},a.name),r.a.createElement("div",{className:"buff-item__actions"},r.a.createElement("div",{className:"buff-item__action buff-item__action--delete",onClick:function(){t(a)}},r.a.createElement("i",{className:"fa fa-trash"})),r.a.createElement("div",{className:"buff-item__action buff-item__action--edit",onClick:function(){n(a)}},r.a.createElement("i",{className:"fa fa-pencil"})))),r.a.createElement("div",{className:"buff-item__content"},r.a.createElement("div",{className:"buff-item__stat-list"},Object.keys(F).map((function(e){var t=a.bonuses?a.bonuses[e]:null,n=a.multipliers?a.multipliers[e]:null,c=!!t&&O(t)||n||!1||null,s="buff-item__stat ";return t>0||n>1?s+="buff-item__stat--positive":(t<0||n>0&&n<1)&&(s+="buff-item__stat--negative"),t||n?r.a.createElement("div",{className:s,key:e},r.a.createElement("div",{className:"buff-item__stat-label"},F[e].string,":"),r.a.createElement("div",{className:"buff-item__stat-value"},c||null)):null}))))))},k={buffDeleted:function(e){return{type:"BUFF_DELETED",payload:e}},buffSelected:function(e){return{type:"BUFF_SELECTED",payload:e}}},D=Object(u.b)((function(e){return{buffs:e.buffs}}),k)((function(e){var a=e.buffs,t=e.buffDeleted,n=e.buffSelected,c=function(e){t(e.code)},s=function(e){n(e.code)};return r.a.createElement("div",null,a.data.map((function(e){return r.a.createElement(T,{key:e.name,buff:e,onDelete:c,onEdit:s})})))})),A=t(27),w=t(26),S=function(e,a){e[a];return Object(A.a)(e,[a].map(w.a))},P={currentBuffUpdated:function(e){return{type:"CURRENT_BUFF_UPDATED",payload:e}},currentBuffSaved:function(e){return{type:"CURRENT_BUFF_SAVED",payload:e}},currentBuffCreated:function(e){return{type:"CURRENT_BUFF_CREATED",payload:e}}},L=Object(u.b)((function(e){return{buff:e.currentBuff}}),P)((function(e){var a=e.buff,t=e.currentBuffUpdated,n=e.currentBuffSaved,c=e.currentBuffCreated,s=function(e,t){return"bonus"===t?function(e){return a.bonuses&&a.bonuses.hasOwnProperty(e)}(e):"multiplier"===t&&function(e){return a.multiplier&&a.multiplier.hasOwnProperty(e)}(e)};return r.a.createElement("div",{className:"buff-form"},r.a.createElement("div",{className:"buff-form__wrapper"},r.a.createElement("div",{className:"buff-form__header"},r.a.createElement("div",{className:"buff-form__title"},r.a.createElement(B,{value:a.name,onChange:function(e){var n=e.target.value;t(Object(o.a)({},a,{name:n}))}})),r.a.createElement("div",{className:"buff-form__actions"},r.a.createElement("div",{className:"buff-form__action buff-form__action--cancel",onClick:function(){t(null)}},r.a.createElement("i",{className:"fa fa-close"})),r.a.createElement("div",{className:"buff-form__action buff-form__action--save",onClick:function(){a.code?n(a):c(Object(o.a)({},a,{code:a.name.replace(" ","_").toLowerCase()}))}},r.a.createElement("i",{className:"fa fa-save"})))),r.a.createElement("div",{className:"buff-form__content"},r.a.createElement("div",{className:"buff-form__subtitle"},"Plain bonuses"),r.a.createElement("div",{className:"buff-form__props"},r.a.createElement("div",{className:"chips"},r.a.createElement("div",{className:"chips__list"},Object.keys(F).map((function(e){var n="chips__item "+(s(e,"bonus")?"chips__item--active":"");return r.a.createElement("div",{className:n,key:e,onClick:function(){return function(e){a.bonuses.hasOwnProperty(e)?t(Object(o.a)({},a,{bonuses:S(a.bonuses,e)})):t(Object(o.a)({},a,{bonuses:Object(o.a)({},a.bonuses,Object(f.a)({},e,0))}))}(e)}},F[e].string)}))))),r.a.createElement("div",{className:"buff-form__field-list"},Object.keys(F).filter((function(e){return a.bonuses.hasOwnProperty(e)})).map((function(e){return r.a.createElement("div",{className:"buff-form__field-item",key:e},r.a.createElement("div",{className:"buff-form__field-label"},F[e].string,":"),r.a.createElement("div",{className:"buff-form__field-content"},r.a.createElement("input",{type:"text",className:"buff-form__field-input",value:a.bonuses[e],onChange:function(n){var r=n.target.value.replace(/[^\d.-]/g,"");"-"!==r&&"0-"!==r&&t(Object(o.a)({},a,{bonuses:Object(o.a)({},a.bonuses,Object(f.a)({},e,+r))}))}})))}))))))})),x={cleanBuffInited:function(e){return{type:"CLEAN_BUFF_INITED",payload:e}},smartFetchBuffs:y},I=Object(u.b)((function(e){return{buffs:e.buffs,currentBuff:e.currentBuff}}),x)((function(e){e.buffs;var a=e.currentBuff,t=e.cleanBuffInited,c=e.smartFetchBuffs;return Object(n.useEffect)((function(){c()}),[c]),r.a.createElement("div",{className:"page"},r.a.createElement("div",{className:"page__wrapper"},r.a.createElement("div",{className:"page__title"},r.a.createElement("div",null,"Buffs page")),r.a.createElement("div",{className:"page__section page__section--grower"},r.a.createElement(D,null)),a?r.a.createElement("div",{className:"page__section page__section--nopadding",style:{maxHeight:"250px"}},r.a.createElement(L,null)):r.a.createElement("div",{className:"page__section page__section--nopadding"},r.a.createElement("button",{className:"button button--success button--lg",onClick:t},r.a.createElement("i",{className:"fa fa-plus button__icon"})))))})),G=function(){return r.a.createElement("div",{className:"page"},r.a.createElement("div",{className:"page__wrapper"},r.a.createElement("div",{className:"page__title"},"d20organizer"),r.a.createElement("div",{className:"page__section"},r.a.createElement("div",{className:"home"},r.a.createElement("div",{className:"home__page-list"},r.a.createElement("div",{className:"home__page-item"},r.a.createElement(l.b,{className:"home__page-link",to:"/buffs"},"Calculator")),r.a.createElement("div",{className:"home__page-item"},r.a.createElement(l.b,{className:"home__page-link",to:"/buffs"},"Buff catalog")))))))},H=function(){return r.a.createElement("div",{className:"navbar"},r.a.createElement("div",{className:"navbar__list"},r.a.createElement(l.b,{to:"/calculator",className:"navbar__item",activeClassName:"navbar__item--active"},r.a.createElement("i",{className:"fa fa-calculator"})),r.a.createElement(l.b,{to:"/buffs",className:"navbar__item",activeClassName:"navbar__item--active"},r.a.createElement("i",{className:"fa fa-list"}))))},z=function(){return r.a.createElement("div",{className:"app"},r.a.createElement("div",{className:"app__header"}),r.a.createElement("div",{className:"app__body"},r.a.createElement("div",{className:"app__content"},r.a.createElement(i.c,null,r.a.createElement(i.a,{path:"/",component:G,exact:!0}),r.a.createElement(i.a,{path:"/calculator",component:j}),r.a.createElement(i.a,{path:"/buffs",component:I})))),r.a.createElement("div",{className:"app__footer"},r.a.createElement("div",{className:"app__navbar"},r.a.createElement(H,null))))},J=t(14),V=t(25),q=t(12),K=function(e,a){if(void 0===e)return{loaded:!1,data:[]};switch(a.type){case"BUFFS_LOADED":return Object(o.a)({},e.buffs,{data:a.payload,loaded:!0});case"BUFF_DELETED":var t=e.buffs.data.filter((function(e){return e.code!==a.payload}));return E(t).then(),Object(o.a)({},e.buffs,{data:t});case"CURRENT_BUFF_SAVED":var n=e.buffs.data.findIndex((function(e){return e.code===a.payload.code})),r=[].concat(Object(q.a)(e.buffs.data.slice(0,n)),[a.payload],Object(q.a)(e.buffs.data.slice(n+1)));return E(r).then(),Object(o.a)({},e.buffs,{data:r});case"CURRENT_BUFF_CREATED":var c=[].concat(Object(q.a)(e.buffs.data),[a.payload]);return E(c).then(),Object(o.a)({},e.buffs,{data:c});default:return e.buffs}},M=function(e,a){if(void 0===e)return null;switch(a.type){case"BUFF_SELECTED":return e.buffs.data.find((function(e){return e.code===a.payload}));case"CURRENT_BUFF_UPDATED":return a.payload;case"CURRENT_BUFF_SAVED":return null;case"CLEAN_BUFF_INITED":return{name:"New buff",bonuses:{}};case"CURRENT_BUFF_CREATED":return null;default:return e.currentBuff}},Q=function(e,a){var t={};return Object.keys(e).forEach((function(n){t[n]=e[n],a.forEach((function(e){e.bonuses&&e.bonuses[n]&&(t[n]+=e.bonuses[n])}))})),t},W=function(e,a){var t={};return Object.keys(a).forEach((function(n){t[n]=a[n]-e[n]})),t},X=function(e,a){var t=a.filter((function(a){return-1!==e.buffs.indexOf(a.code)}));return{stats:Q(e.stats,t),delta:W(e.stats,Q(e.stats,t))}},Y=function(e,a){if(void 0===e)return{loaded:!1,data:null,result:null};switch(a.type){case"CURRENT_CHARACTER_LOADED":return{data:a.payload,result:X(a.payload,e.buffs.data),loaded:!0};case"CURRENT_CHARACTER_UPDATED":var t=a.payload;return p(t).then(),Object(o.a)({},e.currentCharacter,{data:t,result:X(a.payload,e.buffs.data)});case"CURRENT_CHARACTER_BUFF_TOGGLE":var n;n=-1!==e.currentCharacter.data.buffs.indexOf(a.payload)?e.currentCharacter.data.buffs.filter((function(e){return e!==a.payload})):[].concat(Object(q.a)(e.currentCharacter.data.buffs),[a.payload]);var r=Object(o.a)({},e.currentCharacter.data,{buffs:n});return p(r).then(),Object(o.a)({},e.currentCharacter,{data:r,result:X(r,e.buffs.data)});default:return e.currentCharacter}},Z=function(e,a){return{buffs:K(e,a),currentBuff:M(e,a),currentCharacter:Y(e,a)}},$=Object(J.c)(Z,Object(J.a)(V.a));s.a.render(r.a.createElement(u.a,{store:$},r.a.createElement(l.a,null,r.a.createElement(z,null))),document.getElementById("root"))}},[[28,1,2]]]);
//# sourceMappingURL=main.ca7ffb19.chunk.js.map